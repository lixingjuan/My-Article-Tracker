## HTTP2 相比 HTTP1 的改进

1. 多路复用: 允许单一连接并行发送多个网络请求
2. 二进制分帧: 使用二进制格式传输数据，而不是 HTTP/1.1 的文本格式，解析更高效、错误率更低
3. 头部压缩: 引入 HPACK 算法对头部进行压缩，由于头部在一个链接中，经常被重复发送，这种压缩可以显著减少传输的数据量
4. 服务器推送: 允许服务器在客户端请求之前就推送数据
5. 流优先级: 客户端可以告诉服务器希望优先获取哪些资源

## HTTP3 相比 HTTP2 的改进

1. HTTP/3 不再基于 TCP 协议，而是基于 QUIC, 这是一个基于 UDP 的传输协议。
2. 头部压缩: 使用 QPACK 算法，进一步对头部压缩，转为 QUIC 协议设计，解决潜在的 HOL 阻塞问题
3. 改善拥塞控制
4. 减少链接建立时间：最佳情况下连接的建立继续不需要额外的往返延迟
5. 流错误不会影响整个连接：每个 QUIC 流是独立的
6. 更好的移动性能：IP 地址改变也可以不中断，比如从移动网络切到 wifi

## 一个 tcp 连接能发几个 http 请求

1. HTTP1.0： 只能发一个, 每次发送完一个都会断开 tcp；
2. HTTP1.1： 默认开启 Connection: keep-alive，一个 TCP 连接可以发多个 http 请求，但是多个请求是串行执行, 理论上，只要服务器允许，可以发无限多个；
3. HTTP2： 引入了多路复用技术 和二进制分帧，同个域名下的请求只需要占用一个 TCP 连接; 而且不需要等待上一个请求的响应；
4. HTTP3： 一个 tcp 连接可以发送多个 HTTP 请求，但是每个请求都需要先发送一个 HTTP 头部，然后才能发送数据。

## TCP 队头阻塞

如果 HTTP/2 连接双方的网络中有一个数据包丢失，整个 TCP 连接就会暂停，丢失的数据包需要被重新传输。因为 TCP 是一个 `按序传输的链条`，因此如果其中一个点丢失了，链路上之后的内容就都需要等待。
当我们在这个连接上建立 `两个不同的数据流时`，它们互相独立。也就是说，如果一个数据流丢包了，只有那个数据流必须停下来，等待重传。

## Other

- 延迟重复分组到达服务器
- TCP 可靠传输怎么保证？
  1. 报文段从“运输层”交付给“应用层”序号排序
  2. 超时重传
  3. 拥塞控制：根据网络速度，调整单次发送的分组数量

[http3 为什么](https://http3-explained.haxx.se/zh/why-quic/why-tcphol)

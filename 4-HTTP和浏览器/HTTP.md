## HTTP2相比HTTP1 的改进

1. 多路复用: 允许单一连接并行发送多个网络请求
2. 二进制分帧: 使用二进制格式传输数据，而不是HTTP/1.1的文本格式，解析更高效、错误率更低
3. 头部压缩: 引入HPACK算法对头部进行压缩，由于头部在一个链接中，经常被重复发送，这种压缩可以显著减少传输的数据量
4. 服务器推送: 允许服务器在客户端请求之前就推送数据
5. 流优先级: 客户端可以告诉服务器希望优先获取哪些资源

## HTTP3相比HTTP2 的改进

1. HTTP/3不再基于TCP协议，而是基于QUIC, 这是一个基于UDP的传输协议。
2. 头部压缩: 使用QPACK算法，进一步对头部压缩，转为QUIC协议设计，解决潜在的HOL阻塞问题
3. 改善拥塞控制
4. 减少链接建立时间：最佳情况下连接的建立继续不需要额外的往返延迟
5. 流错误不会影响整个连接：每个QUIC流是独立的
6. 更好的移动性能：IP地址改变也可以不中断，比如从移动网络切到wifi

## 一个 tcp 连接能发几个 http 请求

1. HTTP1.0： 只能发一个, 每次发送完一个都会断开tcp；
2. HTTP1.1： 默认开启Connection: keep-alive，一个TCP连接可以发多个http请求，但是多个请求是串行执行, 理论上，只要服务器允许，可以发无限多个；
3. HTTP2： 引入了多路复用技术 和二进制分帧，同个域名下的请求只需要占用一个 TCP 连接; 而且不需要等待上一个请求的响应；
4. HTTP3： 一个 tcp 连接可以发送多个 HTTP 请求，但是每个请求都需要先发送一个 HTTP 头部，然后才能发送数据。

## HTTP2解决了什么问题？

基于 `SPDY`协议

1. 引入了 `无需先入先出的多路复用技术`：
   1. 改进队头阻塞的问题;
   2. 并且允许一个TCP连接发送多个请求，且后一个请求不需要等待前一个请求的响应
2. HPACK算法：对HTTP头部强制压缩;
3. 支持服务端推送;

## HTTP3

改为基于 `UDP`的 `QUIC`协议

1. 改进多路复用：解决 HTTP2.0的队头阻塞问题;
2. 改进头部压缩算法：QPACK;
3. 减少网络拥塞：QUIC的UDP连接可以在网络拥塞时自动调整，从而提高HTTP/3的网络性能;

## TCP队头阻塞

如果HTTP/2连接双方的网络中有一个数据包丢失，整个TCP连接就会暂停，丢失的数据包需要被重新传输。因为TCP是一个 `按序传输的链条`，因此如果其中一个点丢失了，链路上之后的内容就都需要等待。
当我们在这个连接上建立 `两个不同的数据流时`，它们互相独立。也就是说，如果一个数据流丢包了，只有那个数据流必须停下来，等待重传。

## Other

- 延迟重复分组到达服务器
- TCP可靠传输怎么保证？
  1. 报文段从“运输层”交付给“应用层”序号排序
  2. 超时重传
  3. 拥塞控制：根据网络速度，调整单次发送的分组数量

[http3为什么](https://http3-explained.haxx.se/zh/why-quic/why-tcphol)
